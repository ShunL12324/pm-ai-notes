# 5.2 Skills 详解

Skills - Claude Code 内置的轻量级能力扩展机制，基于 Markdown 文件。

## 核心概念

### 什么是 Skills
- Claude Code 的原生扩展机制
- 通过 Markdown 文件定义
- 将指令动态注入系统提示词
- 类似"可复用的 prompt 模板"

### 设计理念
- **能力即知识**：通过提示词赋予模型新能力
- **轻量级**：无需编写代码，纯 Markdown
- **按需加载**：减少 token 消耗

## 架构设计

### Meta-Tool 模式

```
用户输入 /command
    ↓
Skill 系统匹配
    ↓
加载 SKILL.md 内容
    ↓
注入系统提示词
    ↓
模型执行
```

### 三级渐进披露

| 级别 | 描述 | 加载时机 | 示例 |
|------|------|----------|------|
| **L0** | 始终加载 | 会话开始 | CLAUDE.md |
| **L1** | 描述可见 | 始终 | Skill 列表 |
| **L2** | 按需加载 | 调用时 | SKILL.md 内容 |

## 文件结构

```
.claude/
└── skills/
    └── <skill-name>/
        └── SKILL.md
```

### SKILL.md 格式

```yaml
---
name: commit
description: 生成规范的 Git 提交信息
user-invocable: true
allowed-tools: Bash, Read
---

# 提交信息生成指南

按以下规范生成提交信息：
1. 类型：feat/fix/docs/refactor
2. 简短描述（50字以内）
3. 详细说明（可选）
```

### 关键字段

| 字段 | 说明 |
|------|------|
| `name` | 技能名称（小写、连字符） |
| `description` | 描述（用于匹配和展示） |
| `user-invocable` | 是否可通过 /command 调用 |
| `allowed-tools` | 允许使用的工具列表 |

## 调用方式

### 用户主动调用
```
/commit
/review-pr 123
```

### 模型自主决策
- 根据任务自动选择合适的 Skill
- 基于描述匹配

## 核心优势

### Token 效率
- 按需加载，不浪费 token
- 实测节省约 28%

### 零依赖
- 纯 Markdown，无需安装
- 无运行时依赖

### 快速迭代
- 修改文件即时生效（需重启会话）
- 版本控制友好

## 与 CLAUDE.md 的关系

| 文件 | 定位 | 加载时机 |
|------|------|----------|
| CLAUDE.md | 项目级指令 | 始终加载 |
| SKILL.md | 可复用技能 | 按需加载 |

## 典型应用场景

1. **代码规范**：定义项目的编码规范
2. **工作流**：标准化的 PR 流程
3. **模板**：代码审查、文档生成模板
4. **自动化**：测试、部署流程封装
